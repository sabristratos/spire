@layer components {
    /**
     * Phone Input Component Styles
     *
     * Extends shared styles from: base/form-inputs.css
     * - .spire-input-box for base input box styling (size, variant, colors)
     *
     * Target this component with: [data-spire-phone-input-box]
     */

    /* 1. Main container */
    .spire-phone-input {
        @apply relative w-full;
    }

    /* 2. Unified input box - component-specific additions */
    .spire-phone-input-box {
        @apply !gap-0;
    }

    /* 3. Disabled state */
    .spire-phone-input-box:has(:disabled) {
        @apply bg-surface-subtle cursor-not-allowed opacity-50;
    }

    /* 4. Country selector button */
    .spire-phone-input-country {
        @apply flex items-center gap-1.5 px-2 mx-1 bg-transparent cursor-pointer;
        @apply transition-colors hover:bg-hover rounded;
        @apply focus:outline-none;
    }

    .spire-phone-input-country[aria-expanded="true"] {
        @apply bg-hover;
    }

    .spire-phone-input-country[disabled] {
        @apply cursor-not-allowed pointer-events-none;
    }

    /* 5. Flag icon container */
    .spire-phone-input-flag {
        @apply flex-shrink-0;
    }

    /* 6. Dial code display */
    .spire-phone-input-dial-code {
        @apply text-text-muted font-medium whitespace-nowrap;
    }

    /* 7. Phone number input */
    .spire-phone-input-number {
        @apply flex-1 h-full px-3 bg-transparent;
        @apply text-text placeholder:text-text-muted;
        @apply transition-colors;
        @apply focus:outline-none;
        @apply min-w-0;
    }

    .spire-phone-input-number:disabled {
        @apply cursor-not-allowed;
    }

    /* 8. Dropdown content - extends .spire-overlay */
    .spire-phone-input-dropdown {
        @apply w-72 overflow-hidden;
        /* Base styling from .spire-overlay applied in Blade */
    }

    /* 9. Search container */
    .spire-phone-input-search {
        @apply px-2 py-1.5 border-b border-border;
    }

    .spire-phone-input-search-input {
        @apply w-full px-3 py-1.5 text-sm bg-surface border border-border rounded-md;
        @apply text-text placeholder:text-text-muted;
        @apply focus:outline-none focus:border-primary focus:ring-2 focus:ring-primary/20;
    }

    /* 10. Dropdown list container */
    .spire-phone-input-list {
        @apply flex flex-col gap-1 overflow-y-auto p-1;
        @apply focus:outline-none;
    }

    /* 11. Virtual scroll container */
    .spire-phone-input-virtual {
        @apply relative;
    }

    /* 12. Country option */
    .spire-phone-input-option {
        @apply flex items-center gap-3 px-3 py-2 text-sm rounded-md cursor-pointer;
        transition: all var(--animation-duration-fast) ease-out;
    }

    .spire-phone-input-option:hover {
        @apply bg-hover;
    }

    .spire-phone-input-option--highlighted {
        @apply bg-hover;
    }

    .spire-phone-input-option--selected {
        @apply bg-primary/10;
    }

    /* 13. Option content */
    .spire-phone-input-option-flag {
        @apply flex-shrink-0;
    }

    .spire-phone-input-option-name {
        @apply flex-1 text-text truncate;
    }

    .spire-phone-input-option-dial-code {
        @apply text-text-muted text-sm;
    }

    /* 14. Empty state */
    .spire-phone-input-empty {
        @apply px-3 py-2 text-center text-text-muted text-sm;
    }

    /* 15. Divider for preferred countries */
    .spire-phone-input-divider {
        @apply h-px bg-border my-1 mx-3;
    }

    /* 16. Vertical separator between country selector and input */
    .spire-phone-input-separator {
        @apply w-px h-4 bg-border;
    }

    /* 17. Chevron icon */
    .spire-phone-input-chevron {
        @apply w-4 h-4 text-text-muted transition-transform;
    }

    .spire-phone-input-country[aria-expanded="true"] .spire-phone-input-chevron {
        @apply rotate-180;
    }

    /* 17. Variant: flat (no borders between country and input) */
    .spire-phone-input--flat .spire-phone-input-country {
        @apply border-r border-border/50;
    }
}
