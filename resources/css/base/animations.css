@layer utilities {

    /* Base animated element */
    .animated-element {
        @apply opacity-0 transition-all duration-200 ease-out;
        will-change: transform, opacity, clip-path;
    }

    .animated-element.is-visible {
        @apply opacity-100;
        transform: none;
        clip-path: inset(0 0 0 0);
    }

    /* Pop animation - subtle zoom in */
    .animate-pop {
        @apply transition-all duration-200 ease-out;
        transform: scale(0.95);
    }

    .animate-pop.is-visible {
        transform: scale(1);
    }

    /* Slide animations */
    .animate-slide-up {
        @apply transition-all duration-300 ease-(--ease-bounce);
        transform: translateY(20px);
    }

    .animate-slide-up.is-visible {
        transform: translateY(0);
    }

    .animate-slide-left {
        @apply transition-all duration-300 ease-(--ease-bounce);
        transform: translateX(-100%);
    }

    .animate-slide-left.is-visible {
        transform: translateX(0);
    }

    .animate-slide-right {
        @apply transition-all duration-300 ease-(--ease-bounce);
        transform: translateX(100%);
    }

    .animate-slide-right.is-visible {
        transform: translateX(0);
    }

    /* Reveal animation with clip-path */
    .animate-reveal {
        @apply transition-all duration-200 ease-in-out;
        clip-path: inset(100% 0 0 0);
    }

    /* Rotate animation */
    .animate-rotate {
        @apply transition-all duration-200 ease-out;
        transform: scale(0.95) rotate(-3deg);
    }

    .animate-rotate.is-visible {
        transform: scale(1) rotate(0deg);
    }

    /* Spring animation */
    .animate-spring {
        @apply transition-all duration-200 ease-(--ease-spring);
        transform: scale(0.8);
    }

    .animate-spring.is-visible {
        transform: scale(1);
    }

    /**
     * Popover-specific animations
     */
    /* Pop animation for popovers - subtle zoom in */
    [popover].animate-pop {
        @apply opacity-0;
        transform: scale(0.95);
    }

    [popover].animate-pop:popover-open {
        @apply opacity-100 transition-discrete;
        transform: scale(1);
        transition: opacity 200ms, transform 200ms, overlay 200ms allow-discrete, display 200ms allow-discrete;
        transition-timing-function: var(--ease-out);
    }

    @starting-style {
        [popover].animate-pop:popover-open {
            @apply opacity-0;
            transform: scale(0.95);
        }
    }

    /* Slide up animation for popovers */
    [popover].animate-slide-up {
        @apply opacity-0;
        transform: translateY(20px);
    }

    [popover].animate-slide-up:popover-open {
        @apply opacity-100 transition-discrete;
        transform: translateY(0);
        transition: all 300ms var(--ease-bounce), overlay 300ms allow-discrete, display 300ms allow-discrete;
    }

    @starting-style {
        [popover].animate-slide-up:popover-open {
            @apply opacity-0;
            transform: translateY(20px);
        }
    }

    /* Slide left animation for popovers */
    [popover].animate-slide-left {
        @apply opacity-0;
        transform: translateX(-100%);
    }

    [popover].animate-slide-left:popover-open {
        @apply opacity-100 transition-discrete;
        transform: translateX(0);
        transition: all 300ms var(--ease-bounce), overlay 300ms allow-discrete, display 300ms allow-discrete;
    }

    @starting-style {
        [popover].animate-slide-left:popover-open {
            @apply opacity-0;
            transform: translateX(-100%);
        }
    }

    /* Slide right animation for popovers */
    [popover].animate-slide-right {
        @apply opacity-0;
        transform: translateX(100%);
    }

    [popover].animate-slide-right:popover-open {
        @apply opacity-100 transition-discrete;
        transform: translateX(0);
        transition: all 300ms var(--ease-bounce), overlay 300ms allow-discrete, display 300ms allow-discrete;
    }

    @starting-style {
        [popover].animate-slide-right:popover-open {
            @apply opacity-0;
            transform: translateX(100%);
        }
    }

    /* Spring animation for popovers */
    [popover].animate-spring {
        @apply opacity-0;
        transform: scale(0.8);
    }

    [popover].animate-spring:popover-open {
        @apply opacity-100 transition-discrete;
        transform: scale(1);
        transition: all 200ms var(--ease-spring), overlay 200ms allow-discrete, display 200ms allow-discrete;
    }

    @starting-style {
        [popover].animate-spring:popover-open {
            @apply opacity-0;
            transform: scale(0.8);
        }
    }

    /* Dropdown bounce animation - optimized for dropdowns */
    [popover].animate-dropdown-bounce {
        @apply opacity-0;
        transform: scale(0.9);
    }

    [popover].animate-dropdown-bounce:popover-open {
        @apply opacity-100 transition-discrete;
        transform: scale(1);
        transition: opacity 150ms, transform 150ms, overlay 150ms allow-discrete, display 150ms allow-discrete;
        transition-timing-function: var(--ease-bounce);
    }

    @starting-style {
        [popover].animate-dropdown-bounce:popover-open {
            @apply opacity-0;
            transform: scale(0.9);
        }
    }

    /* Tooltip bounce animation - optimized for tooltips */
    [popover].animate-tooltip-bounce {
        @apply opacity-0;
        transform: scale(0.92);
    }

    [popover].animate-tooltip-bounce:popover-open {
        @apply opacity-100 transition-discrete;
        transform: scale(1);
        transition: opacity 150ms, transform 150ms, overlay 150ms allow-discrete, display 150ms allow-discrete;
        transition-timing-function: var(--ease-bounce);
    }

    @starting-style {
        [popover].animate-tooltip-bounce:popover-open {
            @apply opacity-0;
            transform: scale(0.92);
        }
    }

    @media (prefers-reduced-motion: reduce) {
        .animated-element,
        .animate-pop,
        .animate-slide-up,
        .animate-slide-left,
        .animate-slide-right,
        .animate-reveal,
        .animate-rotate,
        .animate-spring,
        [popover].animate-pop,
        [popover].animate-slide-up,
        [popover].animate-slide-left,
        [popover].animate-slide-right,
        [popover].animate-spring,
        [popover].animate-dropdown-bounce,
        [popover].animate-tooltip-bounce {
            @apply transition-none;
            animation: none !important;
        }

        .animated-element,
        .animate-pop,
        .animate-slide-up,
        .animate-slide-left,
        .animate-slide-right,
        .animate-reveal,
        .animate-rotate,
        .animate-spring {
            @apply opacity-100;
            transform: none;
            clip-path: none;
        }

        [popover].animate-pop:popover-open,
        [popover].animate-slide-up:popover-open,
        [popover].animate-slide-left:popover-open,
        [popover].animate-slide-right:popover-open,
        [popover].animate-spring:popover-open,
        [popover].animate-dropdown-bounce:popover-open,
        [popover].animate-tooltip-bounce:popover-open {
            @apply opacity-100 transition-none;
            transform: none;
        }
    }

}
